{% extends 'base/base.html' %}
{% load static %}

{% block title %}Ethereal - Memberships{% endblock %}

{% block content %}
<section class="pt-28 pb-24">
	<div class="flex flex-col lg:flex-row min-h-[calc(100vh-7rem)]">
		{% include 'backends/partials/sidebar.html' with sidebar_title='Memberships' %}

		<div class="flex-1 px-6 lg:px-12 xl:px-16 py-10">
			<div class="max-w-7xl">
				<div class="glass-panel bg-moon-white/85 dark:bg-black-pearl/70 rounded-3xl shadow-2xl p-10 mb-12 mx-auto">
					<!-- Premium Header Section -->
					<div class="relative mb-20 pb-12 border-b-2 border-rosy-taupe/20 dark:border-rosy-taupe/10">
					<div class="absolute -top-8 right-0 w-96 h-96 bg-gradient-to-br from-soft-blush/5 to-transparent dark:from-soft-blush/3 rounded-full blur-3xl pointer-events-none"></div>
					<div class="relative">
						<p class="text-xs tracking-[0.4em] uppercase text-rosy-taupe font-semibold mb-3">Premium Tiers</p>
						<h2 class="font-cormorant text-5xl lg:text-6xl text-obsidian dark:text-pearl font-light mb-4">Membership Tiers</h2>
						<p class="text-sm text-twilight dark:text-lavender-mist max-w-2xl leading-relaxed">Unlock exclusive benefits and rewards as you advance through our luxury membership tiers. Points are earned automatically with every purchase, and your tier upgrades instantly at each milestone.</p>
						<div class="flex flex-wrap gap-4 mt-6">
							<div class="flex items-center gap-2 px-4 py-2 bg-rosy-taupe/10 dark:bg-rosy-taupe/5 rounded-full border border-rosy-taupe/20 shadow-sm">
								<svg class="w-4 h-4 text-rosy-taupe" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/></svg>
								<span class="text-xs text-obsidian dark:text-pearl font-medium">Auto Tier Updates</span>
							</div>
							<div class="flex items-center gap-2 px-4 py-2 bg-rosy-taupe/10 dark:bg-rosy-taupe/5 rounded-full border border-rosy-taupe/20 shadow-sm">
								<svg class="w-4 h-4 text-rosy-taupe" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
								<span class="text-xs text-obsidian dark:text-pearl font-medium">Exclusive Rewards</span>
							</div>
							<div class="flex items-center gap-2 px-4 py-2 bg-rosy-taupe/10 dark:bg-rosy-taupe/5 rounded-full border border-rosy-taupe/20 shadow-sm">
								<svg class="w-4 h-4 text-rosy-taupe" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/></svg>
								<span class="text-xs text-obsidian dark:text-pearl font-medium">Luxury Benefits</span>
							</div>
						</div>
						</div>
					</div>
				</div>

				{% if memberships %}
					<!-- Tier Groups Section -->
					{% regroup memberships by tier as membership_by_tier %}
					
					<div class="space-y-24">
						{% for tier_group in membership_by_tier %}
							<div>
								<!-- Tier Header -->
								<div class="mb-14 relative">
									{% if tier_group.grouper == 'bronze' %}
									<div class="relative pl-8 pb-8 border-l-4 border-amber-700">
									<div class="flex items-end gap-4 mb-3">
										<h3 class="font-cormorant text-5xl text-amber-900 dark:text-amber-200 font-light">Bronze Tier</h3>
										<span class="px-3 py-1.5 bg-amber-100 dark:bg-amber-900/20 text-amber-700 dark:text-amber-300 rounded-full text-xs font-semibold">0% Discount</span>
									</div>
									<p class="text-sm text-amber-700 dark:text-amber-300 mb-2">Entry-level luxury membership</p>
									<p class="text-xs text-amber-700/70 dark:text-amber-300/70">0 - 9,999 Points</p>
									</div>
									{% elif tier_group.grouper == 'silver' %}
									<div class="relative pl-8 pb-8 border-l-4 border-stone-500">
									<div class="flex items-end gap-4 mb-3">
										<h3 class="font-cormorant text-5xl text-stone-900 dark:text-stone-100 font-light">Silver Tier</h3>
										<span class="px-3 py-1.5 bg-stone-100 dark:bg-stone-800 text-stone-700 dark:text-stone-300 rounded-full text-xs font-semibold">3% Discount</span>
									</div>
									<p class="text-sm text-stone-700 dark:text-stone-300 mb-2">Premium membership benefits</p>
									<p class="text-xs text-stone-700/70 dark:text-stone-300/70">10,000 - 19,999 Points</p>
									</div>
									{% elif tier_group.grouper == 'gold' %}
									<div class="relative pl-8 pb-8 border-l-4 border-yellow-600">
									<div class="flex items-end gap-4 mb-3">
										<h3 class="font-cormorant text-5xl text-yellow-900 dark:text-yellow-200 font-light">Gold Tier</h3>
										<span class="px-3 py-1.5 bg-yellow-100 dark:bg-yellow-900/20 text-yellow-700 dark:text-yellow-300 rounded-full text-xs font-semibold">7% Discount</span>
									</div>
									<p class="text-sm text-yellow-700 dark:text-yellow-300 mb-2">Exclusive benefits & privileges</p>
									<p class="text-xs text-yellow-700/70 dark:text-yellow-300/70">20,000 - 29,999 Points</p>
									</div>
									{% elif tier_group.grouper == 'platinum' %}
									<div class="relative pl-8 pb-8 border-l-4 border-amber-300">
									<div class="flex items-end gap-4 mb-3">
										<h3 class="font-cormorant text-5xl text-amber-900 dark:text-amber-200 font-light">Platinum Tier</h3>
										<span class="px-3 py-1.5 bg-amber-100 dark:bg-amber-900/20 text-amber-700 dark:text-amber-300 rounded-full text-xs font-semibold">11% Discount</span>
									</div>
									<p class="text-sm text-amber-700 dark:text-amber-300 mb-2">Luxury VIP membership</p>
									<p class="text-xs text-amber-700/70 dark:text-amber-300/70">30,000 - 39,999 Points</p>
									</div>
									{% elif tier_group.grouper == 'diamond' %}
									<div class="relative pl-8 pb-8 border-l-4 border-stone-300">
									<div class="flex items-end gap-4 mb-3">
										<h3 class="font-cormorant text-5xl text-stone-900 dark:text-stone-100 font-light">Diamond Tier</h3>
										<span class="px-3 py-1.5 bg-stone-200 dark:bg-stone-700 text-stone-800 dark:text-stone-200 rounded-full text-xs font-semibold">15% Discount</span>
									</div>
									<p class="text-sm text-stone-700 dark:text-stone-300 mb-2">Elite collectors program</p>
									<p class="text-xs text-stone-700/70 dark:text-stone-300/70">40,000+ Points</p>
									</div>
									{% endif %}
							</div>

								<!-- Tier Cards Grid -->
								<div class="grid gap-8 grid-cols-1">
									{% for membership in tier_group.list %}
										{% if membership.is_featured %}
											<!-- Featured Card -->
											<div class="group rounded-3xl border-2 border-mint/60 bg-moon-white/80 dark:bg-black-pearl/60 p-10 shadow-[0_40px_100px_rgba(192,152,145,0.2)] hover:shadow-[0_50px_120px_rgba(192,152,145,0.3)] hover:border-mint/100 transition-all duration-400 flex flex-col relative backdrop-blur-sm hover:-translate-y-1{% if membership.tier == 'platinum' or membership.tier == 'diamond' %} border-amber-200/70 bg-gradient-to-br from-amber-50/85 via-moon-white/80 to-lilac-ash/10{% endif %}">
												<!-- Featured Badge -->
												<div class="absolute top-6 right-6 bg-gradient-to-br from-soft-blush via-rosy-taupe to-dusty-taupe text-obsidian px-5 py-2.5 rounded-full font-cormorant text-xs font-semibold shadow-[0_8px_20px_rgba(192,152,145,0.4)] flex items-center gap-1.5 z-10">
													<svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/></svg>
													Featured
												</div>

												<div class="mb-6 flex-1">
													<div class="flex items-start justify-between gap-4 mb-6">
														<div class="flex-1">
															<p class="text-xs tracking-[0.4em] uppercase text-rosy-taupe font-bold mb-2 flex items-center gap-1.5">
																<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/></svg>
																Premium Tier
															</p>
															<h3 class="font-cormorant text-4xl text-obsidian dark:text-pearl font-light">{{ membership.name }}</h3>
														</div>
													</div>

													<div class="mb-8 p-5 bg-moon-white/60 dark:bg-black-pearl/30 rounded-2xl border border-obsidian/10 dark:border-pearl/10">
														<p class="text-sm text-twilight dark:text-lavender-mist leading-relaxed italic">{{ membership.description }}</p>
													</div>

													<!-- Benefits Section -->
													<div class="mb-8">
														<p class="text-xs tracking-[0.3em] uppercase font-bold text-obsidian dark:text-pearl mb-4">Tier Benefits</p>
														<div class="space-y-3">
															{% for benefit in membership.benefits|slice:":4" %}
																<div class="flex items-start gap-3 p-2 rounded-lg hover:bg-obsidian/3 dark:hover:bg-pearl/3 transition-all duration-300">
																	<svg class="w-5 h-5 text-rosy-taupe mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
																	<span class="text-sm text-obsidian dark:text-pearl font-light">{{ benefit }}</span>
																</div>
															{% endfor %}
														</div>
													</div>
												</div>

												<!-- Discount Badge -->
												<div class="mt-auto p-5 bg-gradient-to-r from-soft-blush/20 to-lilac-ash/10 dark:from-soft-blush/10 dark:to-lilac-ash/5 rounded-2xl text-center border-2 border-rosy-taupe/40 dark:border-rosy-taupe/30">
													<p class="text-xs tracking-[0.2em] uppercase text-twilight dark:text-lavender-mist font-semibold mb-1">Tier Discount</p>
													<p class="font-cormorant text-4xl text-rosy-taupe font-light">
														{% if membership.tier == 'bronze' %}0%
														{% elif membership.tier == 'silver' %}3%
														{% elif membership.tier == 'gold' %}7%
														{% elif membership.tier == 'platinum' %}11%
														{% else %}15%
														{% endif %}
													</p>
												</div>
											</div>
										{% else %}
											<!-- Standard Card -->
											<div class="group rounded-3xl border-2 border-obsidian/10 dark:border-pearl/10 bg-moon-white/85 dark:bg-black-pearl/70 p-10 shadow-[0_30px_70px_rgba(27,26,23,0.12)] hover:shadow-[0_40px_90px_rgba(27,26,23,0.2)] hover:border-obsidian/20 dark:hover:border-pearl/20 transition-all duration-400 flex flex-col relative hover:-translate-y-1 backdrop-blur-sm{% if membership.tier == 'platinum' or membership.tier == 'diamond' %} border-amber-200/60 bg-gradient-to-br from-amber-50/90 to-amber-50/70{% endif %}">
												<div class="mb-6 flex-1">
													<div class="flex items-start justify-between gap-4 mb-6">
														<div class="flex-1">
															<h3 class="font-cormorant text-4xl text-obsidian dark:text-pearl font-light">{{ membership.name }}</h3>
															<p class="text-xs tracking-[0.3em] uppercase text-obsidian/60 dark:text-pearl/60 font-semibold mt-1 flex items-center gap-2">
																<span class="w-2 h-2 rounded-full bg-obsidian/40 dark:bg-pearl/40 hover:scale-105 transition-transform duration-200"></span>
																{{ membership.tier|upper }}
															</p>
														</div>
														{% if membership.is_active %}
															<span class="px-3 py-2 bg-soft-blush/70 dark:bg-obsidian/20 text-rosy-taupe dark:text-lilac-ash rounded-full text-xs font-semibold whitespace-nowrap">Active</span>
														{% endif %}
													</div>

													<div class="mb-8 p-6 bg-gradient-to-br from-soft-blush/20 to-lilac-ash/5 dark:from-soft-blush/10 dark:to-lilac-ash/3 rounded-2xl border border-rosy-taupe/30 dark:border-rosy-taupe/20">
														<p class="text-sm text-twilight dark:text-lavender-mist leading-relaxed italic">{{ membership.description }}</p>
													</div>

													<!-- Benefits Section -->
													<div class="mb-8">
														<p class="text-xs tracking-[0.3em] uppercase font-bold text-obsidian dark:text-pearl mb-4">What's Included</p>
														<div class="space-y-3">
															{% for benefit in membership.benefits|slice:":4" %}
																<div class="flex items-start gap-3 p-2 rounded-lg hover:bg-rosy-taupe/5 transition-all duration-300">
																	<svg class="w-5 h-5 text-rosy-taupe mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
																	<span class="text-sm text-obsidian dark:text-pearl font-light">{{ benefit }}</span>
																</div>
															{% endfor %}
														</div>
													</div>
												</div>

												<!-- Discount Badge -->
												<div class="mt-auto p-5 bg-gradient-to-r from-soft-blush/15 to-lilac-ash/8 dark:from-soft-blush/8 dark:to-lilac-ash/3 rounded-2xl text-center border-2 border-rosy-taupe/30 dark:border-rosy-taupe/20">
													<p class="text-xs tracking-[0.2em] uppercase text-twilight dark:text-lavender-mist font-semibold mb-1">Tier Discount</p>
													<p class="font-cormorant text-4xl text-rosy-taupe font-light">
														{% if membership.tier == 'bronze' %}0%
														{% elif membership.tier == 'silver' %}3%
														{% elif membership.tier == 'gold' %}7%
														{% elif membership.tier == 'platinum' %}11%
														{% else %}15%
														{% endif %}
													</p>
												</div>
											</div>
										{% endif %}
									{% endfor %}
								</div>
							</div>
						{% endfor %}
					</div>

					<!-- Pagination -->
					{% if paginator %}
						<div class="mt-24 pt-12 border-t-2 border-obsidian/10 dark:border-pearl/10 flex flex-wrap items-center justify-center gap-2">
							{% for num in paginator_list %}
								{% if num == page_obj.number %}
									<span class="px-4 py-2.5 text-xs tracking-[0.2em] uppercase bg-gradient-to-r from-soft-blush to-dusty-taupe text-obsidian rounded-lg font-bold shadow-[0_4px_12px_rgba(192,152,145,0.3)]">{{ num }}</span>
								{% else %}
									<a href="?page={{ num }}"
										class="btn px-4 py-2.5 text-xs tracking-[0.2em] uppercase border-2 border-obsidian/20 dark:border-pearl/20 text-obsidian dark:text-pearl hover:bg-obsidian hover:text-moon-white dark:hover:bg-pearl dark:hover:text-obsidian transition-all duration-300 rounded-lg font-medium">{{ num }}</a>
								{% endif %}
							{% endfor %}

							{% if page_obj.has_next %}
								<a href="?page={{ page_obj.next_page_number }}"
									class="btn px-4 py-2.5 text-xs tracking-[0.2em] uppercase border-2 border-obsidian/20 dark:border-pearl/20 text-obsidian dark:text-pearl hover:bg-obsidian hover:text-moon-white dark:hover:bg-pearl dark:hover:text-obsidian transition-all duration-300 rounded-lg font-medium">Next ⟩</a>
								<a href="?page={{ paginator.num_pages }}"
									class="btn px-4 py-2.5 text-xs tracking-[0.2em] uppercase border-2 border-obsidian/20 dark:border-pearl/20 text-obsidian dark:text-pearl hover:bg-obsidian hover:text-moon-white dark:hover:bg-pearl dark:hover:text-obsidian transition-all duration-300 rounded-lg font-medium">Last ⟩⟩</a>
							{% endif %}
						</div>
					{% endif %}
				{% else %}
					<div class="rounded-3xl border-2 border-rosy-taupe/20 bg-gradient-to-br from-soft-blush/10 to-transparent dark:from-soft-blush/5 dark:to-transparent p-16 shadow-[0_30px_60px_rgba(27,26,23,0.08)] text-center">
					<svg class="w-16 h-16 mx-auto mb-6 text-rosy-taupe/40" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/></svg>
					<p class="text-lg text-obsidian dark:text-pearl font-cormorant mb-2">No memberships found</p>
					<p class="text-sm text-twilight dark:text-lavender-mist mb-8">Create your first membership tier to get started</p>
					<a href="{% url 'backends:add_membership' %}"
						class="btn inline-block px-8 py-3 text-xs tracking-[0.25em] uppercase bg-gradient-to-r from-soft-blush to-dusty-taupe text-obsidian hover:shadow-[0_8px_20px_rgba(192,152,145,0.3)] transition-all duration-300 rounded-xl font-semibold">
						<svg class="w-4 h-4 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/></svg>
						Create Membership</a>
					</div>
			{% endif %}
			</div>
		</div>
	</div>
</section>
{% endblock %}






