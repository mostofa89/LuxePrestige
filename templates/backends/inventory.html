{% extends 'base/base.html' %}
{% load static %}

{% block title %}Ethereal - Inventory{% endblock %}

{% block content %}
<section class="pt-28 pb-24">
	<div class="flex flex-col lg:flex-row min-h-[calc(100vh-7rem)]">
		{% include 'backends/partials/sidebar.html' with sidebar_title='Inventory' %}

		<div class="flex-1 px-6 lg:px-12 xl:px-16 py-10">
			<div class="max-w-6xl">
				<div class="flex flex-col lg:flex-row lg:items-center lg:justify-between gap-8 mb-12">
					<div>
						<p class="text-xs tracking-[0.4em] uppercase text-twilight dark:text-lavender-mist mb-3">Backends</p>
						<h2 class="font-cormorant text-4xl lg:text-5xl text-obsidian dark:text-pearl font-light">Inventory Control</h2>
					</div>
					<div class="flex flex-wrap gap-4">
						<a href="{% url 'backends:add_inventory' %}" class="px-6 py-3 text-xs tracking-[0.25em] uppercase bg-obsidian text-moon-white dark:bg-pearl dark:text-obsidian hover:bg-rose-gold transition-colors">Add Inventory</a>
					</div>
				</div>

				<div class="rounded-3xl border border-solid border-obsidian/10 dark:border-pearl/10 bg-moon-white/85 dark:bg-black-pearl/70 p-8 shadow-[0_30px_60px_rgba(27,26,23,0.08)] card-glow">
					<div class="flex items-center justify-between mb-6">
						<h3 class="font-cormorant text-2xl text-obsidian dark:text-pearl font-light">Inventory</h3>
						<div class="text-xs tracking-[0.25em] uppercase text-twilight dark:text-lavender-mist">{{ inventory_list|length|default:"0" }} total</div>
					</div>
					<div class="space-y-4">
						{% if inventory_list %}
							<div class="hidden md:grid grid-cols-12 gap-4 px-5 text-xs tracking-[0.25em] uppercase text-twilight dark:text-lavender-mist">
								<div class="col-span-3">Product</div>
								<div class="col-span-2">Stock Qty</div>
								<div class="col-span-2">Restock Date</div>
								<div class="col-span-1">Status</div>
								<div class="col-span-2">Created</div>
								<div class="col-span-1">Updated</div>
								<div class="col-span-1 text-right">Actions</div>
							</div>
							{% for item in inventory_list %}
								<div class="grid grid-cols-1 md:grid-cols-12 gap-4 items-start md:items-center border border-solid border-obsidian/10 dark:border-pearl/10 rounded-2xl p-5 bg-moon-white/70 dark:bg-black-pearl/40 card-glow">
									<div class="md:col-span-3">
										<p class="text-xs tracking-[0.2em] uppercase text-twilight dark:text-lavender-mist md:hidden">Product</p>
										<p class="text-lg text-obsidian dark:text-pearl mt-2 md:mt-0">{{ item.product.name }}</p>
									</div>
									<div class="md:col-span-2">
										<p class="text-xs tracking-[0.2em] uppercase text-twilight dark:text-lavender-mist md:hidden">Stock Qty</p>
										<p class="text-sm text-twilight dark:text-lavender-mist mt-2 md:mt-0">{{ item.stock_quantity }}</p>
									</div>
									<div class="md:col-span-2">
										<p class="text-xs tracking-[0.2em] uppercase text-twilight dark:text-lavender-mist md:hidden">Restock Date</p>
										<p class="text-sm text-twilight dark:text-lavender-mist mt-2 md:mt-0">
											{% if item.restock_date %}{{ item.restock_date|date:"M d, Y" }}{% else %}--{% endif %}
										</p>
									</div>
									<div class="md:col-span-1">
										<p class="text-xs tracking-[0.2em] uppercase text-twilight dark:text-lavender-mist md:hidden">Status</p>
										<span class="inline-flex text-xs tracking-[0.2em] uppercase px-3 py-1 rounded-full bg-pearl dark:bg-midnight text-obsidian dark:text-pearl mt-2 md:mt-0">
											{% if item.is_active %}Active{% else %}Inactive{% endif %}
										</span>
									</div>
									<div class="md:col-span-2">
										<p class="text-xs tracking-[0.2em] uppercase text-twilight dark:text-lavender-mist md:hidden">Created</p>
										<p class="text-sm text-twilight dark:text-lavender-mist mt-2 md:mt-0">{{ item.created_at|date:"M d, Y" }}</p>
									</div>
									<div class="md:col-span-1">
										<p class="text-xs tracking-[0.2em] uppercase text-twilight dark:text-lavender-mist md:hidden">Updated</p>
										<p class="text-sm text-twilight dark:text-lavender-mist mt-2 md:mt-0">{{ item.updated_at|date:"M d, Y" }}</p>
									</div>
									<div class="md:col-span-1 md:text-right">
										<p class="text-xs tracking-[0.2em] uppercase text-twilight dark:text-lavender-mist md:hidden">Actions</p>
										<div class="flex items-center gap-3 mt-2 md:mt-0 w-full md:justify-end">
											<a href="#" class="text-xs tracking-[0.25em] uppercase text-twilight hover:text-midnight dark:text-lavender-mist dark:hover:text-champagne transition-colors">View</a>
											<a href="#" class="text-xs tracking-[0.25em] uppercase text-rose-gold hover:text-midnight dark:hover:text-champagne transition-colors">Edit</a>
											<button type="button" class="text-xs tracking-[0.25em] uppercase text-twilight hover:text-midnight dark:text-lavender-mist dark:hover:text-champagne transition-colors">Delete</button>
										</div>
									</div>
								</div>
							{% endfor %}
						{% else %}
							<div class="text-sm text-twilight dark:text-lavender-mist">No inventory records found.</div>
						{% endif %}
					</div>
				</div>

				{% if page_obj %}
					<div class="mt-10 flex flex-wrap items-center gap-2">
						{% if page_obj.has_previous %}
							<a href="?page={{ page_obj.previous_page_number }}" class="px-4 py-2 text-xs tracking-[0.2em] uppercase border border-solid border-obsidian/15 dark:border-pearl/15 text-obsidian dark:text-pearl hover:text-rose-gold transition-colors">Prev</a>
						{% endif %}
						{% for page in paginator_list %}
							{% if page == page_obj.number %}
								<span class="px-4 py-2 text-xs tracking-[0.2em] uppercase bg-obsidian text-moon-white dark:bg-pearl dark:text-obsidian">{{ page }}</span>
							{% else %}
								<a href="?page={{ page }}" class="px-4 py-2 text-xs tracking-[0.2em] uppercase border border-solid border-obsidian/15 dark:border-pearl/15 text-obsidian dark:text-pearl hover:text-rose-gold transition-colors">{{ page }}</a>
							{% endif %}
						{% endfor %}
						{% if page_obj.has_next %}
							<a href="?page={{ page_obj.next_page_number }}" class="px-4 py-2 text-xs tracking-[0.2em] uppercase border border-solid border-obsidian/15 dark:border-pearl/15 text-obsidian dark:text-pearl hover:text-rose-gold transition-colors">Next</a>
						{% endif %}
					</div>
				{% endif %}
			</div>
		</div>
	</div>
</section>
{% endblock %}
