{% extends 'base/base.html' %}

{% block content %}
<section class="min-h-screen bg-gradient-to-br from-brand-900 via-brand-800 to-brand-900 theme-light:from-cream-50 theme-light:via-cream-100 theme-light:to-cream-50 py-12 px-4">
	<!-- Background gradient effect -->
	<div class="absolute inset-0 opacity-60 bg-[radial-gradient(circle_at_10%_20%,rgba(183,110,121,0.25),transparent_35%),radial-gradient(circle_at_90%_0%,rgba(17,100,102,0.35),transparent_30%),radial-gradient(circle_at_50%_90%,rgba(183,110,121,0.25),transparent_35%)]"></div>
	<div class="absolute inset-0 backdrop-blur-2xl"></div>

	<div class="relative max-w-6xl mx-auto">
		<!-- Header -->
		<div class="mb-12">
			<div class="flex items-center justify-between mb-6">
				<div>
					<h1 class="font-display text-4xl font-bold text-white theme-light:text-brand-900 mb-2">Shipping Addresses</h1>
					<p class="text-white theme-light:text-brand-700">Manage your delivery addresses</p>
				</div>
				<a href="{% url 'accounts:profile' %}" class="px-6 py-2.5 rounded-lg bg-brand-800/40 theme-light:bg-white text-white theme-light:text-brand-900 border border-accent-400/30 hover:border-accent-400/60 transition-all">
					<i class="fas fa-arrow-left mr-2"></i>Back to Profile
				</a>
			</div>
		</div>

		<!-- Main Grid -->
		<div class="grid lg:grid-cols-2 gap-8">
			<!-- Add New Address Form -->
			<div class="glass-dark rounded-2xl border border-accent-400/30 theme-light:bg-white theme-light:border-brand-200 shadow-2xl">
				<div class="p-8 space-y-6">
					<div class="flex items-center justify-between mb-6">
						<h2 class="text-2xl font-bold text-white theme-light:text-brand-900">
							<i class="fas fa-plus-circle text-accent-400 mr-3"></i>Add New Address
						</h2>
					</div>

					{% if messages %}
						<div class="space-y-2">
							{% for message in messages %}
								<div class="px-4 py-3 rounded-lg {% if message.tags == 'success' %}bg-green-500/15 border border-green-500/30 text-green-100 theme-light:text-green-900 theme-light:bg-green-50{% else %}bg-red-500/15 border border-red-500/30 text-red-100 theme-light:text-red-900 theme-light:bg-red-50{% endif %}">
									{{ message }}
								</div>
							{% endfor %}
						</div>
					{% endif %}

					<form method="post" class="space-y-5">
						{% csrf_token %}

						<!-- Address Line -->
						<div class="space-y-2">
							<label for="address_line" class="text-sm font-semibold text-white theme-light:text-brand-900">
								Street Address <span class="text-red-400">*</span>
							</label>
							<input type="text" id="address_line" name="address_line" required
								class="w-full px-4 py-3 rounded-xl bg-brand-800/50 dark:bg-brand-800/40 border border-accent-400/30 text-white theme-light:text-brand-900 theme-light:bg-cream-50 theme-light:border-brand-300 placeholder-white/50 theme-light:placeholder-brand-400 focus:outline-none focus:border-accent-400 focus:ring-2 focus:ring-accent-400/50 transition-all"
								placeholder="123 Main Street, Apt 4B" />
						</div>

						<!-- City & State -->
						<div class="grid md:grid-cols-2 gap-4">
							<div class="space-y-2">
								<label for="city" class="text-sm font-semibold text-white theme-light:text-brand-900">
									City <span class="text-red-400">*</span>
								</label>
								<input type="text" id="city" name="city" required
									class="w-full px-4 py-3 rounded-xl bg-brand-800/50 dark:bg-brand-800/40 border border-accent-400/30 text-white theme-light:text-brand-900 theme-light:bg-cream-50 theme-light:border-brand-300 placeholder-white/50 theme-light:placeholder-brand-400 focus:outline-none focus:border-accent-400 focus:ring-2 focus:ring-accent-400/50 transition-all"
									placeholder="New York" />
							</div>
							<div class="space-y-2">
								<label for="state" class="text-sm font-semibold text-white theme-light:text-brand-900">
									State/Province <span class="text-red-400">*</span>
								</label>
								<input type="text" id="state" name="state" required
									class="w-full px-4 py-3 rounded-xl bg-brand-800/50 dark:bg-brand-800/40 border border-accent-400/30 text-white theme-light:text-brand-900 theme-light:bg-cream-50 theme-light:border-brand-300 placeholder-white/50 theme-light:placeholder-brand-400 focus:outline-none focus:border-accent-400 focus:ring-2 focus:ring-accent-400/50 transition-all"
									placeholder="NY" />
							</div>
						</div>

						<!-- Postal Code & Country -->
						<div class="grid md:grid-cols-2 gap-4">
							<div class="space-y-2">
								<label for="postal_code" class="text-sm font-semibold text-white theme-light:text-brand-900">
									Postal Code <span class="text-red-400">*</span>
								</label>
								<input type="text" id="postal_code" name="postal_code" required
									class="w-full px-4 py-3 rounded-xl bg-brand-800/50 dark:bg-brand-800/40 border border-accent-400/30 text-white theme-light:text-brand-900 theme-light:bg-cream-50 theme-light:border-brand-300 placeholder-white/50 theme-light:placeholder-brand-400 focus:outline-none focus:border-accent-400 focus:ring-2 focus:ring-accent-400/50 transition-all"
									placeholder="10001" />
							</div>
							<div class="space-y-2">
								<label for="country" class="text-sm font-semibold text-white theme-light:text-brand-900">
									Country <span class="text-red-400">*</span>
								</label>
								<select id="country" name="country" required
									class="w-full px-4 py-3 rounded-xl bg-brand-800/50 dark:bg-brand-800/40 border border-accent-400/30 text-white theme-light:text-brand-900 theme-light:bg-cream-50 theme-light:border-brand-300 focus:outline-none focus:border-accent-400 focus:ring-2 focus:ring-accent-400/50 transition-all">
									<option value="">Select Country</option>
									<option value="United States">United States</option>
									<option value="Canada">Canada</option>
									<option value="United Kingdom">United Kingdom</option>
									<option value="Australia">Australia</option>
									<option value="Germany">Germany</option>
									<option value="France">France</option>
									<option value="Italy">Italy</option>
									<option value="Spain">Spain</option>
									<option value="Japan">Japan</option>
									<option value="China">China</option>
									<option value="India">India</option>
									<option value="Brazil">Brazil</option>
									<option value="Mexico">Mexico</option>
									<option value="Other">Other</option>
								</select>
							</div>
						</div>

						<!-- Submit Button -->
						<button type="submit" class="w-full py-3.5 rounded-xl bg-gradient-to-r from-accent-500 to-accent-600 text-white font-semibold text-base shadow-lg shadow-accent-700/30 hover:-translate-y-0.5 hover:shadow-xl transition-all duration-300">
							<i class="fas fa-save mr-2"></i>Save Address
						</button>
					</form>
				</div>
			</div>

			<!-- Saved Addresses List -->
			<div class="space-y-6">
				<div class="glass-dark rounded-2xl border border-accent-400/30 theme-light:bg-white theme-light:border-brand-200 shadow-2xl p-8">
					<h2 class="text-2xl font-bold text-white theme-light:text-brand-900 mb-6">
						<i class="fas fa-map-marker-alt text-accent-400 mr-3"></i>Saved Addresses
					</h2>

					<!-- Address Cards -->
					<div class="space-y-4">
						{% if addresses %}
							{% for address in addresses %}
								<div class="p-5 rounded-lg bg-brand-800/40 theme-light:bg-cream-50 border border-accent-400/20 hover:border-accent-400/40 transition-all">
									<div class="flex items-start justify-between mb-3">
										<div class="flex items-center space-x-2">
											<div class="w-10 h-10 rounded-lg bg-accent-500/20 flex items-center justify-center">
												<i class="fas fa-location-dot text-accent-400"></i>
											</div>
											<div>
												<p class="text-white theme-light:text-brand-900 font-semibold">{{ address.city }}, {{ address.state }}</p>
												<span class="text-xs text-white theme-light:text-brand-600">{{ address.country }}</span>
											</div>
										</div>
										<button class="px-3 py-1 rounded-lg bg-red-500/20 text-red-300 theme-light:text-red-700 hover:bg-red-500/30 transition-all text-sm">
											<i class="fas fa-trash"></i>
										</button>
									</div>
									<div class="pl-12 space-y-1 text-sm text-white theme-light:text-brand-700">
										<p>{{ address.address_line }}</p>
										<p>{{ address.city }}, {{ address.state }} {{ address.postal_code }}</p>
										<p>{{ address.country }}</p>
									</div>
								</div>
							{% endfor %}
						{% else %}
							<!-- Empty State -->
							<div class="text-center py-12">
								<div class="w-20 h-20 mx-auto mb-4 rounded-full bg-accent-500/10 flex items-center justify-center">
									<i class="fas fa-map-marker-alt text-4xl text-accent-400"></i>
								</div>
								<h3 class="text-xl font-semibold text-white theme-light:text-brand-900 mb-2">No Addresses Yet</h3>
								<p class="text-white theme-light:text-brand-700">Add your first shipping address to get started</p>
							</div>
						{% endif %}
					</div>
				</div>

				<!-- Info Card -->
				<div class="p-6 rounded-lg bg-gradient-to-r from-accent-500/20 to-accent-600/20 border border-accent-400/30">
					<div class="flex items-start space-x-3">
						<i class="fas fa-info-circle text-accent-300 text-xl mt-1"></i>
						<div>
							<h4 class="text-white theme-light:text-brand-900 font-semibold mb-1">Quick Tip</h4>
							<p class="text-sm text-white theme-light:text-brand-700">Save multiple addresses for faster checkout. You can choose your preferred address during order placement.</p>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</section>
{% endblock %}
